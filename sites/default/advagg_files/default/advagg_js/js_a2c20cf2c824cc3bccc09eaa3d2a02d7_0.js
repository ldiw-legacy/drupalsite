/* Source and licensing information for the line(s) below can be found at http://www.letsdoitworld.org/misc/drupal.js. */
(function(){var jquery_init=jQuery.fn.init;jQuery.fn.init=function(selector,context,rootjQuery){if(selector&&typeof selector==='string'){var hash_position=selector.indexOf('#');if(hash_position>=0){var bracket_position=selector.indexOf('<');if(bracket_position>hash_position)throw'Syntax error, unrecognized expression: '+selector}};return jquery_init.call(this,selector,context,rootjQuery)};jQuery.fn.init.prototype=jquery_init.prototype})();var Drupal=Drupal||{settings:{},behaviors:{},themes:{},locale:{}};Drupal.jsEnabled=document.getElementsByTagName&&document.createElement&&document.createTextNode&&document.documentElement&&document.getElementById;Drupal.attachBehaviors=function(context){context=context||document;if(Drupal.jsEnabled)jQuery.each(Drupal.behaviors,function(){this(context)})};Drupal.checkPlain=function(str){str=String(str);var replace={'&':'&amp;','"':'&quot;','<':'&lt;','>':'&gt;'};for(var character in replace){var regex=new RegExp(character,'g');str=str.replace(regex,replace[character])};return str};Drupal.t=function(str,args){if(Drupal.locale.strings&&Drupal.locale.strings[str])str=Drupal.locale.strings[str];if(args)for(var key in args){switch(key.charAt(0)){case'@':args[key]=Drupal.checkPlain(args[key]);break;case'!':break;case'%':default:args[key]=Drupal.theme('placeholder',args[key]);break};str=str.replace(key,args[key])};return str};Drupal.formatPlural=function(count,singular,plural,args){var args=args||{};args['@count']=count;var index=Drupal.locale.pluralFormula?Drupal.locale.pluralFormula(args['@count']):((args['@count']==1)?0:1);if(index==0){return Drupal.t(singular,args)}else if(index==1){return Drupal.t(plural,args)}else{args['@count['+index+']']=args['@count'];delete args['@count'];return Drupal.t(plural.replace('@count','@count['+index+']'),args)}};Drupal.theme=function(func){for(var i=1,args=[];i<arguments.length;i++)args.push(arguments[i]);return(Drupal.theme[func]||Drupal.theme.prototype[func]).apply(this,args)};Drupal.parseJson=function(data){if((data.substring(0,1)!='{')&&(data.substring(0,1)!='['))return{status:0,data:data.length?data:Drupal.t('Unspecified error')};return eval('('+data+');')};Drupal.freezeHeight=function(){Drupal.unfreezeHeight();var div=document.createElement('div');$(div).css({position:'absolute',top:'0px',left:'0px',width:'1px',height:$('body').css('height')}).attr('id','freeze-height');$('body').append(div)};Drupal.unfreezeHeight=function(){$('#freeze-height').remove()};Drupal.encodeURIComponent=function(item,uri){uri=uri||location.href;item=encodeURIComponent(item).replace(/%2F/g,'/');return(uri.indexOf('?q=')!=-1)?item:item.replace(/%26/g,'%2526').replace(/%23/g,'%2523').replace(/\/\//g,'/%252F')};Drupal.getSelection=function(element){if(typeof(element.selectionStart)!='number'&&document.selection){var range1=document.selection.createRange(),range2=range1.duplicate();range2.moveToElementText(element);range2.setEndPoint('EndToEnd',range1);var start=range2.text.length-range1.text.length,end=start+range1.text.length;return{start:start,end:end}};return{start:element.selectionStart,end:element.selectionEnd}};Drupal.ahahError=function(xmlhttp,uri){if(xmlhttp.status==200){if(jQuery.trim($(xmlhttp.responseText).text())){var message=Drupal.t("An error occurred. \n@uri\n@text",{'@uri':uri,'@text':xmlhttp.responseText})}else var message=Drupal.t("An error occurred. \n@uri\n(no information available).",{'@uri':uri,'@text':xmlhttp.responseText})}else var message=Drupal.t("An HTTP error @status occurred. \n@uri",{'@uri':uri,'@status':xmlhttp.status});return message};if(Drupal.jsEnabled){$(document.documentElement).addClass('js');document.cookie='has_js=1; path=/';$(document).ready(function(){Drupal.attachBehaviors(this)})};Drupal.theme.prototype={placeholder:function(str){return'<em>'+Drupal.checkPlain(str)+'</em>'}};
/* Source and licensing information for the above line(s) can be found at http://www.letsdoitworld.org/misc/drupal.js. */
/* Source and licensing information for the line(s) below can be found at http://www.letsdoitworld.org/sites/all/modules/nice_menus/superfish/js/superfish.js. */
(function($){$.fn.superfish=function(op){var sf=$.fn.superfish,c=sf.c,$arrow=$(['<span class="',c.arrowClass,'"> &#187;</span>'].join('')),over=function(){var $$=$(this),menu=getMenu($$);clearTimeout(menu.sfTimer);$$.showSuperfishUl().siblings().hideSuperfishUl()},out=function(){var $$=$(this),menu=getMenu($$),o=sf.op;clearTimeout(menu.sfTimer);menu.sfTimer=setTimeout(function(){o.retainPath=($.inArray($$[0],o.$path)>-1);$$.hideSuperfishUl();if(o.$path.length&&$$.parents(['li.',o.hoverClass].join('')).length<1)over.call(o.$path)},o.delay)},getMenu=function($menu){var menu=$menu.parents(['ul.',c.menuClass,':first'].join(''))[0];sf.op=sf.o[menu.serial];return menu},addArrow=function($a){$a.addClass(c.anchorClass).append($arrow.clone())};return this.each(function(){var s=this.serial=sf.o.length,o=$.extend({},sf.defaults,op);o.$path=$('li.'+o.pathClass,this).slice(0,o.pathLevels).each(function(){$(this).addClass([o.hoverClass,c.bcClass].join(' ')).filter('li:has(ul)').removeClass(o.pathClass)});sf.o[s]=sf.op=o;$('li:has(ul)',this)[($.fn.hoverIntent&&!o.disableHI)?'hoverIntent':'hover'](over,out).each(function(){if(o.autoArrows)addArrow($('>a:first-child',this))}).not('.'+c.bcClass).hideSuperfishUl();var $a=$('a',this);$a.each(function(i){var $li=$a.eq(i).parents('li');$a.eq(i).focus(function(){over.call($li)}).blur(function(){out.call($li)})});o.onInit.call(this)}).each(function(){var menuClasses=[c.menuClass];if(sf.op.dropShadows&&!($.browser.msie&&$.browser.version<7))menuClasses.push(c.shadowClass);$(this).addClass(menuClasses.join(' '))})};var sf=$.fn.superfish;sf.o=[];sf.op={};sf.IE7fix=function(){var o=sf.op;if($.browser.msie&&$.browser.version>6&&o.dropShadows&&o.animation.opacity!=undefined)this.toggleClass(sf.c.shadowClass+'-off')};sf.c={bcClass:'sf-breadcrumb',menuClass:'sf-js-enabled',anchorClass:'sf-with-ul',arrowClass:'sf-sub-indicator',shadowClass:'sf-shadow'};sf.defaults={hoverClass:'sfHover',pathClass:'overideThisToUse',pathLevels:1,delay:800,animation:{opacity:'show'},speed:'normal',autoArrows:true,dropShadows:true,disableHI:false,onInit:function(){},onBeforeShow:function(){},onShow:function(){},onHide:function(){}};$.fn.extend({hideSuperfishUl:function(){var o=sf.op,not=(o.retainPath===true)?o.$path:'';o.retainPath=false;var $ul=$(['li.',o.hoverClass].join(''),this).add(this).not(not).removeClass(o.hoverClass).find('>ul').hide().css('visibility','hidden');o.onHide.call($ul);return this},showSuperfishUl:function(){var o=sf.op,sh=sf.c.shadowClass+'-off',$ul=this.addClass(o.hoverClass).find('>ul:hidden').css('visibility','visible');sf.IE7fix.call($ul);o.onBeforeShow.call($ul);$ul.animate(o.animation,o.speed,function(){sf.IE7fix.call($ul);o.onShow.call($ul)});return this}})})(jQuery);
/* Source and licensing information for the above line(s) can be found at http://www.letsdoitworld.org/sites/all/modules/nice_menus/superfish/js/superfish.js. */
/* Source and licensing information for the line(s) below can be found at http://www.letsdoitworld.org/sites/all/modules/nice_menus/superfish/js/jquery.bgiframe.min.js. */
(function($){$.fn.bgIframe=$.fn.bgiframe=function(s){if($.browser.msie&&parseInt($.browser.version)<=6){s=$.extend({top:'auto',left:'auto',width:'auto',height:'auto',opacity:true,src:'javascript:false;'},s||{});var prop=function(n){return n&&n.constructor==Number?n+'px':n},html='<iframe class="bgiframe"frameborder="0"tabindex="-1"src="'+s.src+'"style="display:block;position:absolute;z-index:-1;'+(s.opacity!==false?'filter:Alpha(Opacity=\'0\');':'')+'top:'+(s.top=='auto'?'expression(((parseInt(this.parentNode.currentStyle.borderTopWidth)||0)*-1)+\'px\')':prop(s.top))+';left:'+(s.left=='auto'?'expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth)||0)*-1)+\'px\')':prop(s.left))+';width:'+(s.width=='auto'?'expression(this.parentNode.offsetWidth+\'px\')':prop(s.width))+';height:'+(s.height=='auto'?'expression(this.parentNode.offsetHeight+\'px\')':prop(s.height))+';"/>';return this.each(function(){if($('> iframe.bgiframe',this).length==0)this.insertBefore(document.createElement(html),this.firstChild)})};return this};if(!$.browser.version)$.browser.version=navigator.userAgent.toLowerCase().match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)[1]})(jQuery);
/* Source and licensing information for the above line(s) can be found at http://www.letsdoitworld.org/sites/all/modules/nice_menus/superfish/js/jquery.bgiframe.min.js. */
/* Source and licensing information for the line(s) below can be found at http://www.letsdoitworld.org/sites/all/modules/nice_menus/superfish/js/jquery.hoverIntent.minified.js. */
(function($){$.fn.hoverIntent=function(f,g){var cfg={sensitivity:7,interval:100,timeout:0};cfg=$.extend(cfg,g?{over:f,out:g}:f);var cX,cY,pX,pY,track=function(ev){cX=ev.pageX;cY=ev.pageY},compare=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);if((Math.abs(pX-cX)+Math.abs(pY-cY))<cfg.sensitivity){$(ob).unbind("mousemove",track);ob.hoverIntent_s=1;return cfg.over.apply(ob,[ev])}else{pX=cX;pY=cY;ob.hoverIntent_t=setTimeout(function(){compare(ev,ob)},cfg.interval)}},delay=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);ob.hoverIntent_s=0;return cfg.out.apply(ob,[ev])},handleHover=function(e){var p=(e.type=="mouseover"?e.fromElement:e.toElement)||e.relatedTarget;while(p&&p!=this)try{p=p.parentNode}catch(e){p=this};if(p==this)return false;var ev=jQuery.extend({},e),ob=this;if(ob.hoverIntent_t)ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);if(e.type=="mouseover"){pX=ev.pageX;pY=ev.pageY;$(ob).bind("mousemove",track);if(ob.hoverIntent_s!=1)ob.hoverIntent_t=setTimeout(function(){compare(ev,ob)},cfg.interval)}else{$(ob).unbind("mousemove",track);if(ob.hoverIntent_s==1)ob.hoverIntent_t=setTimeout(function(){delay(ev,ob)},cfg.timeout)}};return this.mouseover(handleHover).mouseout(handleHover)}})(jQuery);
/* Source and licensing information for the above line(s) can be found at http://www.letsdoitworld.org/sites/all/modules/nice_menus/superfish/js/jquery.hoverIntent.minified.js. */
/* Source and licensing information for the line(s) below can be found at http://www.letsdoitworld.org/sites/all/modules/nice_menus/nice_menus.js. */
(function($){$(document).ready(function(){$('ul.nice-menu').superfish({hoverClass:'over',autoArrows:false,dropShadows:false,delay:Drupal.settings.nice_menus_options.delay,speed:Drupal.settings.nice_menus_options.speed}).find('ul').bgIframe({opacity:false});$('ul.nice-menu ul').css('display','none')})})(jQuery);
/* Source and licensing information for the above line(s) can be found at http://www.letsdoitworld.org/sites/all/modules/nice_menus/nice_menus.js. */
/* Source and licensing information for the line(s) below can be found at http://www.letsdoitworld.org/sites/all/modules/spamspan/spamspan.compressed.js. */
Drupal.behaviors.spamspan=function(_1){$("span."+Drupal.settings.spamspan.m,_1).each(function(_2){var _3=($("span."+Drupal.settings.spamspan.u,this).text()+"@"+$("span."+Drupal.settings.spamspan.d,this).text()).replace(/\s+/g,"").replace(/\[dot\]/g,"."),_4=$("span."+Drupal.settings.spamspan.h,this).text().replace(/^ ?\((.*)\) ?$/,"$1"),_5=$.map(_4.split(/, /),function(n,i){return(n.replace(/: /,"="))}),_6=$("span."+Drupal.settings.spamspan.t,this).text().replace(/^ \((.*)\)$/,"$1"),_7="mailto:"+encodeURIComponent(_3),_8=_5.join("&");_7+=_8?("?"+_8):"";$(this).after($("<a></a>").attr("href",_7).html(_6?_6:_3).addClass("spamspan")).remove()})};
/* Source and licensing information for the above line(s) can be found at http://www.letsdoitworld.org/sites/all/modules/spamspan/spamspan.compressed.js. */
/* Source and licensing information for the line(s) below can be found at http://www.letsdoitworld.org/sites/all/modules/admin/includes/jquery.cookie.js. */
jQuery.cookie=function(name,value,options){if(typeof value!='undefined'){options=options||{};if(value===null){value='';options.expires=-1};var expires='';if(options.expires&&(typeof options.expires=='number'||options.expires.toUTCString)){var date;if(typeof options.expires=='number'){date=new Date();date.setTime(date.getTime()+(options.expires*24*60*60*1e3))}else date=options.expires;expires='; expires='+date.toUTCString()};var path=options.path?'; path='+options.path:'',domain=options.domain?'; domain='+options.domain:'',secure=options.secure?'; secure':'';document.cookie=[name,'=',encodeURIComponent(value),expires,path,domain,secure].join('')}else{var cookieValue=null;if(document.cookie&&document.cookie!=''){var cookies=document.cookie.split(';');for(var i=0;i<cookies.length;i++){var cookie=jQuery.trim(cookies[i]);if(cookie.substring(0,name.length+1)==(name+'=')){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break}}};return cookieValue}};
/* Source and licensing information for the above line(s) can be found at http://www.letsdoitworld.org/sites/all/modules/admin/includes/jquery.cookie.js. */
/* Source and licensing information for the line(s) below can be found at http://www.letsdoitworld.org/sites/all/modules/admin/includes/jquery.drilldown.js. */
(function($){$.fn.drilldown=function(method,settings){var menu=this,activePath,rootTitle=settings.rootTitle||'Home';switch(method){case'goTo':if(this.activePath&&this.activePath===$(settings.activeLink).attr('href'))return false;return true;case'setActive':var breadcrumb=[],activeMenu;$(settings.activeLink).each(function(){$(this).parents('ul.menu').each(function(){if($(this).parents('ul.menu').size()>0){$(this).siblings('a').each(function(){breadcrumb.unshift($(this))})}else if($(this).children('li').size()>1){var root;if($(this).siblings('a.drilldown-root').size()>0){root=$(this).siblings('a.drilldown-root')}else{root=$('<a href="#" class="drilldown-root" style="display:none">'+rootTitle+'</a>');$(this).before(root)};breadcrumb.unshift(root)}});if($(this).next().is('ul.menu')){activeMenu=$(this).next();breadcrumb.push($(this))}else activeMenu=$(this).parents('ul.menu').eq(0);if(activeMenu){$('.drilldown-active-trail',menu).removeClass('drilldown-active-trail');$('ul.menu',menu).removeClass('drilldown-active-menu').removeClass('clear-block');$(activeMenu).addClass('drilldown-active-menu').addClass('clear-block').parents('li').addClass('drilldown-active-trail').show()}});if(breadcrumb.length>0){var trail=$(settings.trail);trail.empty();for(var key in breadcrumb)if(breadcrumb[key]){var clone=$('<a></a>').attr('href',$(breadcrumb[key]).attr('href')).attr('class',$(breadcrumb[key]).attr('class')).html($(breadcrumb[key]).html()).addClass('depth-'+key).appendTo(trail);$('a.depth-'+key,trail).data('original',$(breadcrumb[key])).click(function(){settings.activeLink=$(this).data('original');if(settings.activeLink.siblings('ul.drilldown-active-menu').size()===0){menu.drilldown('setActive',settings);return false};return menu.drilldown('goTo',settings)})}};$(menu).trigger('refresh.drilldown');break;case'init':if($('ul.menu ul.menu',menu).size()>0){$(menu).addClass('drilldown');$(settings.trail).addClass('drilldown-trail');var activeLink;$('ul.menu a',menu).removeClass('active');if(settings.activePath&&$('ul.menu a[href='+settings.activePath+']',menu).size()>0){this.activePath=settings.activePath;activeLink=$('ul.menu a[href='+settings.activePath+']',menu).addClass('active')};if(!activeLink)activeLink=$('ul.menu a.active',menu).size()?$('ul.menu a.active',menu):$('ul.menu > li > a',menu);if(activeLink)menu.drilldown('setActive',{activeLink:$(activeLink[0]),trail:settings.trail,rootTitle:rootTitle});$('ul.menu li:has(ul.menu)',this).click(function(){if($(this).parent().is('.drilldown-active-menu'))if(menu.data('disableMenu')){return true}else{var url=$(this).children('a').attr('href'),activeLink=$('ul.menu a[href='+url+']',menu);menu.drilldown('setActive',{activeLink:activeLink,trail:settings.trail,rootTitle:rootTitle});return false}});$('ul.menu li:has(ul.menu) a',menu).click(function(){menu.data('disableMenu',true)})};break};return this}})(jQuery);
/* Source and licensing information for the above line(s) can be found at http://www.letsdoitworld.org/sites/all/modules/admin/includes/jquery.drilldown.js. */
/* Source and licensing information for the line(s) below can be found at http://www.letsdoitworld.org/sites/all/modules/admin/includes/admin.toolbar.js. */
Drupal.behaviors.adminToolbar=function(context){$('#admin-toolbar:not(.processed)').each(function(){var toolbar=$(this);toolbar.addClass('processed');Drupal.adminToolbar.init(toolbar);$('.admin-toggle',this).click(function(){Drupal.adminToolbar.toggle(toolbar)});$('div.admin-tab',this).click(function(){Drupal.adminToolbar.tab(toolbar,$(this),true)})});$('div.admin-panes:not(.processed)').each(function(){var panes=$(this);panes.addClass('processed');$('h2.admin-pane-title a').click(function(){var target=$(this).attr('href').split('#')[1],panes=$(this).parents('div.admin-panes')[0];$('.admin-pane-active',panes).removeClass('admin-pane-active');$('div.admin-pane.'+target,panes).addClass('admin-pane-active');$(this).addClass('admin-pane-active');return false})})};Drupal.adminToolbar={};Drupal.adminToolbar.init=function(toolbar){if(!$(document.body).hasClass('admin-ah')){var expanded=this.getState('expanded');if(expanded==1)$(document.body).addClass('admin-expanded')};var target=this.getState('activeTab');if(target)if($('div.admin-tab.'+target).size()>0){var tab=$('div.admin-tab.'+target);this.tab(toolbar,tab,false)};var classes=toolbar.attr('class').split(' ');if(classes[0]==='nw'||classes[0]==='ne'||classes[0]==='se'||classes[0]==='sw')$(document.body).addClass('admin-'+classes[0]);if(classes[1]==='horizontal'||classes[1]==='vertical')$(document.body).addClass('admin-'+classes[1]);if(classes[2]==='df'||classes[2]==='ah')$(document.body).addClass('admin-'+classes[2])};Drupal.adminToolbar.tab=function(toolbar,tab,animate){if(!tab.is('.admin-tab-active')){var target=$('span',tab).attr('id').split('admin-tab-')[1];if(toolbar.is('.vertical')&&animate){$('.admin-tab-active',toolbar).fadeOut('fast');$(tab).fadeOut('fast',function(){$('.admin-tab-active',toolbar).fadeIn('fast').removeClass('admin-tab-active');$(tab).slideDown('fast').addClass('admin-tab-active');Drupal.adminToolbar.setState('activeTab',target)})}else{$('div.admin-tab',toolbar).removeClass('admin-tab-active');$(tab,toolbar).addClass('admin-tab-active');Drupal.adminToolbar.setState('activeTab',target)};$('div.admin-block.admin-active',toolbar).removeClass('admin-active');$('#block-'+target,toolbar).addClass('admin-active')};return false};Drupal.adminToolbar.toggle=function(toolbar){if($(document.body).is('.admin-expanded')){if($(toolbar).is('.vertical')){$('div.admin-blocks',toolbar).animate({width:'0px'},'fast',function(){$(this).css('display','none')});if($(toolbar).is('.nw')||$(toolbar).is('sw')){$(document.body).animate({marginLeft:'0px'},'fast',function(){$(this).toggleClass('admin-expanded')})}else $(document.body).animate({marginRight:'0px'},'fast',function(){$(this).toggleClass('admin-expanded')})}else{$('div.admin-blocks',toolbar).animate({height:'0px'},'fast');if($(toolbar).is('.nw')||$(toolbar).is('ne')){$(document.body).animate({marginTop:'0px'},'fast',function(){$(this).toggleClass('admin-expanded')})}else $(document.body).animate({marginBottom:'0px'},'fast',function(){$(this).toggleClass('admin-expanded')})};this.setState('expanded',0)}else{if($(toolbar).is('.vertical')){$('div.admin-blocks',toolbar).animate({width:'260px'},'fast');if($(toolbar).is('.nw')||$(toolbar).is('sw')){$(document.body).animate({marginLeft:'260px'},'fast',function(){$(this).toggleClass('admin-expanded')})}else $(document.body).animate({marginRight:'260px'},'fast',function(){$(this).toggleClass('admin-expanded')})}else{$('div.admin-blocks',toolbar).animate({height:'260px'},'fast');if($(toolbar).is('.nw')||$(toolbar).is('ne')){$(document.body).animate({marginTop:'260px'},'fast',function(){$(this).toggleClass('admin-expanded')})}else $(document.body).animate({marginBottom:'260px'},'fast',function(){$(this).toggleClass('admin-expanded')})};if($(document.body).hasClass('admin-ah')){this.setState('expanded',0)}else this.setState('expanded',1)}};Drupal.adminToolbar.getState=function(key){if(!Drupal.adminToolbar.state){Drupal.adminToolbar.state={};var cookie=$.cookie('DrupalAdminToolbar'),query=cookie?cookie.split('&'):[];if(query)for(var i in query)if(typeof(query[i])=='string'&&query[i].indexOf('=')!=-1){var values=query[i].split('=');if(values.length===2)Drupal.adminToolbar.state[values[0]]=values[1]}};return Drupal.adminToolbar.state[key]?Drupal.adminToolbar.state[key]:false};Drupal.adminToolbar.setState=function(key,value){var existing=Drupal.adminToolbar.getState(key);if(existing!=value){Drupal.adminToolbar.state[key]=value;var query=[];for(var i in Drupal.adminToolbar.state)query.push(i+'='+Drupal.adminToolbar.state[i]);$.cookie('DrupalAdminToolbar',query.join('&'),{expires:7,path:'/'})}};
/* Source and licensing information for the above line(s) can be found at http://www.letsdoitworld.org/sites/all/modules/admin/includes/admin.toolbar.js. */
/* Source and licensing information for the line(s) below can be found at http://www.letsdoitworld.org/sites/all/modules/admin/includes/admin.menu.js. */
Drupal.behaviors.adminToolbarMenu=function(context){if(jQuery().drilldown)$('#admin-toolbar div.admin-block:has(ul.menu):not(.admin-toolbar-menu)').addClass('admin-toolbar-menu').each(function(){var menu=$(this),trail='#admin-toolbar div.admin-tab.'+$(this).attr('id').split('block-')[1]+' span',rootTitle=$(trail).text();if($('a:has(span.menu-description)',menu).size()>0){menu.addClass('admin-toolbar-menu-hover');$('a:has(span.menu-description)',menu).hover(function(){$('<a></a>').attr('class',$(this).attr('class')).addClass('menu-hover').append($('span.menu-description',this).clone()).appendTo(menu).show()},function(){$(menu).children('a.menu-hover').remove()})};menu.bind('refresh.drilldown',function(){$(trail+' a').unbind('click').click(function(){if($(this).parents('div.admin-tab').is('.admin-tab-active')){var settings={activeLink:$(this).data('original'),trail:trail};if(settings.activeLink.siblings('ul.drilldown-active-menu').size()===0){menu.drilldown('setActive',settings);return false};return menu.drilldown('goTo',settings)};$(this).parents('div.admin-tab').click();return false})});menu.drilldown('init',{activePath:Drupal.settings.activePath,trail:trail,rootTitle:rootTitle})})};
/* Source and licensing information for the above line(s) can be found at http://www.letsdoitworld.org/sites/all/modules/admin/includes/admin.menu.js. */
/* Source and licensing information for the line(s) below can be found at http://www.letsdoitworld.org/sites/all/modules/views/js/base.js. */
Drupal.Views={};Drupal.behaviors.viewsTabs=function(context){$('#views-tabset:not(.views-processed)').addClass('views-processed').each(function(){new Drupal.Views.Tabs($(this),{selectedClass:'active'})});$('a.views-remove-link').addClass('views-processed').click(function(){var id=$(this).attr('id').replace('views-remove-link-','');$('#views-row-'+id).hide();$('#views-removed-'+id).attr('checked',true);return false})};Drupal.behaviors.viewsHoverlinks=function(){if($.browser.msie){$("div.view:not(.views-hover-processed)").addClass('views-hover-processed').hover(function(){$('div.views-hide',this).addClass("views-hide-hover");return true},function(){$('div.views-hide',this).removeClass("views-hide-hover");return true});$("div.views-admin-links:not(.views-hover-processed)").addClass('views-hover-processed').hover(function(){$(this).addClass("views-admin-links-hover");return true},function(){$(this).removeClass("views-admin-links-hover");return true})}};Drupal.Views.parseQueryString=function(query){var args={},pos=query.indexOf('?');if(pos!=-1)query=query.substring(pos+1);var pairs=query.split('&');for(var i in pairs)if(typeof(pairs[i])=='string'){var pair=pairs[i].split('=');if(pair[0]!='q'&&pair[1])args[pair[0]]=decodeURIComponent(pair[1].replace(/\+/g,' '))};return args};Drupal.Views.parseViewArgs=function(href,viewPath){var returnObj={},path=Drupal.Views.getPath(href);if(viewPath&&path.substring(0,viewPath.length+1)==viewPath+'/'){var args=decodeURIComponent(path.substring(viewPath.length+1,path.length));returnObj.view_args=args;returnObj.view_path=path};return returnObj};Drupal.Views.pathPortion=function(href){var protocol=window.location.protocol;if(href.substring(0,protocol.length)==protocol)href=href.substring(href.indexOf('/',protocol.length+2));return href};Drupal.Views.getPath=function(href){href=Drupal.Views.pathPortion(href);href=href.substring(Drupal.settings.basePath.length,href.length);if(href.substring(0,3)=='?q=')href=href.substring(3,href.length);var chars=['#','?','&'];for(i in chars)if(href.indexOf(chars[i])>-1)href=href.substr(0,href.indexOf(chars[i]));return href};
/* Source and licensing information for the above line(s) can be found at http://www.letsdoitworld.org/sites/all/modules/views/js/base.js. */
/* Source and licensing information for the line(s) below can be found at http://www.letsdoitworld.org/sites/all/modules/views/js/tabs.js. */
Drupal.Views=Drupal.Views||{};Drupal.Views.Tabs=function(el,options){this.source=el;this.options=$.extend({initial:0,event:'click',disabled:[],unselected:false,toggle:options.unselected?true:false,spinner:'Loading&#8230;',cache:false,hashPrefix:'tab-',fxSpeed:'normal',add:function(){},remove:function(){},enable:function(){},disable:function(){},click:function(){},hide:function(){},show:function(){},load:function(){},navClass:'ui-tabs-nav',selectedClass:'ui-tabs-selected',disabledClass:'ui-tabs-disabled',containerClass:'ui-tabs-container',hideClass:'ui-tabs-hide',loadingClass:'ui-tabs-loading'},options);this.tabify(true);var uuid='instance-'+ Drupal.Views.Tabs.prototype.count++;Drupal.Views.Tabs.instances[uuid]=this;this.source.data('UI_TABS_UUID',uuid)};Drupal.Views.Tabs.instances={};$.extend(Drupal.Views.Tabs.prototype,{animating:false,count:0,tabify:function(init){this.$tabs=$('a:first-child',this.source);this.$containers=$([]);var self=this,o=this.options;this.$tabs.each(function(i,a){if(a.hash&&a.hash.replace('#','')){self.$containers=self.$containers.add(a.hash)}else{var id=a.title&&a.title.replace(/\s/g,'_')||o.hashPrefix+(self.count+1)+'-'+(i+1),url=a.href;a.href='#'+id;a.url=url;self.$containers=self.$containers.add($('#'+id)[0]||$('<div id="'+id+'" class="'+o.containerClass+'"></div>').insertAfter(self.$containers[i-1]||self.source))}});if(init){this.$tabs.each(function(i,a){if(location.hash){if(a.hash==location.hash){o.initial=i;if($.browser.msie||$.browser.opera){var $toShow=$(location.hash),toShowId=$toShow.attr('id');$toShow.attr('id','');setTimeout(function(){$toShow.attr('id',toShowId)},500)};scrollTo(0,0);return false}}else if($(a).parents('li:eq(0)').is('li.'+o.selectedClass)){o.initial=i;return false}});$(this.source).is('.'+o.navClass)||$(this.source).addClass(o.navClass);this.$containers.each(function(){var $this=$(this);$this.is('.'+o.containerClass)||$this.addClass(o.containerClass)});var $lis=$('li',this.source);this.$containers.addClass(o.hideClass);$lis.removeClass(o.selectedClass);if(!o.unselected){this.$containers.slice(o.initial,o.initial+1).show();$lis.slice(o.initial,o.initial+1).addClass(o.selectedClass)};if(this.$tabs[o.initial].url){this.load(o.initial+1,this.$tabs[o.initial].url);if(o.cache)this.$tabs[o.initial].url=null};for(var i=0,position;position=o.disabled[i];i++)this.disable(position)};var showAnim={},hideAnim={},showSpeed=o.fxShowSpeed||o.fxSpeed,hideSpeed=o.fxHideSpeed||o.fxSpeed;if(o.fxSlide||o.fxFade){if(o.fxSlide){showAnim.height='show';hideAnim.height='hide'};if(o.fxFade){showAnim.opacity='show';hideAnim.opacity='hide'}}else{if(o.fxShow){showAnim=o.fxShow}else{showAnim['min-width']=0;showSpeed=1};if(o.fxHide){hideAnim=o.fxHide}else{hideAnim['min-width']=0;hideSpeed=1}};var click=o.click,hide=o.hide,show=o.show,resetCSS={display:'',overflow:'',height:''};if(!$.browser.msie)resetCSS.opacity=''
function hideTab(clicked,$hide,$show){$hide.animate(hideAnim,hideSpeed,function(){$hide.addClass(o.hideClass).css(resetCSS);hide(clicked,$show,$hide[0]);if($show)showTab(clicked,$hide,$show)})}
function showTab(clicked,$hide,$show){if(!(o.fxSlide||o.fxFade||o.fxShow))$show.css('display','block');$show.animate(showAnim,showSpeed,function(){$show.removeClass(o.hideClass).css(resetCSS);if($.browser.msie){$hide[0].style.filter='';$show[0].style.filter=''};show(clicked,$show[0],$hide[0]);self.animating=false})}
function switchTab(clicked,$hide,$show){$(clicked).parents('li:eq(0)').addClass(o.selectedClass).siblings().removeClass(o.selectedClass);hideTab(clicked,$hide,$show)}
function tabClick(e){var $li=$(this).parents('li:eq(0)'),$hide=self.$containers.filter(':visible'),$show=$(this.hash);if(o.toggle&&!$li.is('.'+o.disabledClass)&&!self.animating)if($li.is('.'+o.selectedClass)){$li.removeClass(o.selectedClass);hideTab(this,$hide);this.blur();return false}else if(!$hide.length){$li.addClass(o.selectedClass);showTab(this,$hide,$show);this.blur();return false};if($li.is('.'+o.selectedClass+', .'+o.disabledClass)||self.animating||click(this,$show[0],$hide[0])===false){this.blur();return false};self.animating=true;if($show.length){if(this.url){var a=this;self.load(self.$tabs.index(this)+1,this.url,function(){switchTab(a,$hide,$show)});if(o.cache)this.url=null}else switchTab(this,$hide,$show)}else throw Drupal.t('jQuery UI Tabs: Mismatching fragment identifier.');this.blur();return false};this.$tabs.unbind(o.event,tabClick).bind(o.event,tabClick)},add:function(url,text,position){if(url&&text){var o=this.options;position=position||this.$tabs.length;if(position>=this.$tabs.length){var method='insertAfter';position=this.$tabs.length}else var method='insertBefore';if(url.indexOf('#')==0){var $container=$(url);($container.length&&$container||$('<div id="'+url.replace('#','')+'" class="'+o.containerClass+' '+o.hideClass+'"></div>'))[method](this.$containers[position-1])};$('<li><a href="'+url+'"><span>'+text+'</span></a></li>')[method](this.$tabs.slice(position-1,position).parents('li:eq(0)'));this.tabify();o.add(this.$tabs[position-1],this.$containers[position-1])}else throw Drupal.t('jQuery UI Tabs: Not enough arguments to add tab.')},remove:function(position){if(position&&position.constructor==Number){this.$tabs.slice(position-1,position).parents('li:eq(0)').remove();this.$containers.slice(position-1,position).remove();this.tabify()};this.options.remove()},enable:function(position){var $li=this.$tabs.slice(position-1,position).parents('li:eq(0)'),o=this.options;$li.removeClass(o.disabledClass);if($.browser.safari)$li.animate({opacity:1},1,function(){$li.css({opacity:''})});o.enable(this.$tabs[position-1],this.$containers[position-1])},disable:function(position){var $li=this.$tabs.slice(position-1,position).parents('li:eq(0)'),o=this.options;if($.browser.safari)$li.animate({opacity:0},1,function(){$li.css({opacity:''})});$li.addClass(this.options.disabledClass);o.disable(this.$tabs[position-1],this.$containers[position-1])},click:function(position){this.$tabs.slice(position-1,position).trigger('click')},load:function(position,url,callback){var self=this,o=this.options,$a=this.$tabs.slice(position-1,position).addClass(o.loadingClass),$span=$('span',$a),text=$span.html();if(url&&url.constructor==Function)callback=url;if(url)$a[0].url=url;if(o.spinner)$span.html('<em>'+o.spinner+'</em>');setTimeout(function(){$($a[0].hash).load(url,function(){if(o.spinner)$span.html(text);$a.removeClass(o.loadingClass);if(callback&&callback.constructor==Function)callback();o.load(self.$tabs[position-1],self.$containers[position-1])})},0)}});
/* Source and licensing information for the above line(s) can be found at http://www.letsdoitworld.org/sites/all/modules/views/js/tabs.js. */
/* Source and licensing information for the line(s) below can be found at http://www.letsdoitworld.org/sites/all/modules/views/js/ajax.js. */
Drupal.Views.Ajax=Drupal.Views.Ajax||{};Drupal.Views.Ajax.setForm=function(title,output){$(Drupal.settings.views.ajax.title).html(title);$(Drupal.settings.views.ajax.id).html(output)};Drupal.Views.Ajax.ajaxResponse=function(data){$('a.views-throbbing').removeClass('views-throbbing');$('span.views-throbbing').remove();if(data.debug)alert(data.debug);if(Drupal.settings.viewsAjax)Drupal.settings.viewsAjax={};if(data.js)$.extend(Drupal.settings,data.js);if(data.display){Drupal.Views.Ajax.setForm(data.title,data.display);if(data.url){var ajax_area=Drupal.settings.views.ajax.id,ajax_title=Drupal.settings.views.ajax.title;$('input[type=submit], button',ajax_area).unbind('click');$('input[type=submit], button',ajax_area).click(function(){$('form',ajax_area).append('<input type="hidden" name="'+$(this).attr('name')+'" value="'+$(this).val()+'">');$(this).after('<span class="views-throbbing">&nbsp</span>')});$('form',ajax_area).unbind('submit');$('form',ajax_area).submit(function(arg){$(this).ajaxSubmit({url:data.url,data:{js:1},type:'POST',success:Drupal.Views.Ajax.ajaxResponse,error:function(xhr){$('span.views-throbbing').remove();Drupal.Views.Ajax.handleErrors(xhr,data.url)},dataType:'json'});return false})};Drupal.attachBehaviors(ajax_area)}else if(!data.tab){Drupal.Views.Ajax.setForm('',Drupal.settings.views.ajax.defaultForm);$('#edit-save').removeAttr('disabled');$('#edit-delete').removeAttr('disabled');if($('#views-ui-preview-form input#edit-live-preview').is(':checked'))$('#views-ui-preview-form').trigger('submit')};if(data.add)for(id in data.add){var newContent=$(id).append(data.add[id]);Drupal.attachBehaviors(newContent)};if(data.replace)for(id in data.replace){$(id).html(data.replace[id]);Drupal.attachBehaviors(id)};if(data.tab)for(id in data.tab){var instance=Drupal.Views.Tabs.instances[$('#views-tabset').data('UI_TABS_UUID')];instance.add(id,data.tab[id]['title'],0);instance.click(instance.$tabs.length);$(id).html(data.tab[id]['body']);$(id).addClass('views-tab');var display_id=id.replace('#views-tab-','');$("#preview-display-id").append('<option selected="selected" value="'+display_id+'">'+data.tab[id]['title']+'</option>');Drupal.attachBehaviors(id)};if(data.hilite){$('.hilited').removeClass('hilited');$(data.hilite).addClass('hilited')};if(data.changed)$('div.views-basic-info').addClass('changed')};Drupal.Views.Ajax.previewResponse=function(data){$('a.views-throbbing').removeClass('views-throbbing');$('span.views-throbbing').remove();if(data.debug)alert(data.debug);if(Drupal.settings.viewsAjax)Drupal.settings.viewsAjax={};if(data.js)$.extend(Drupal.settings,data.js);if(data.display){var ajax_area='div#views-live-preview';$(ajax_area).html(data.display);var url=$(ajax_area,'form').attr('action');if(url){$('input[type=submit], button',ajax_area).unbind('click');$('input[type=submit], button',ajax_area).click(function(){$('form',ajax_area).append('<input type="hidden" name="'+$(this).attr('name')+'" value="'+$(this).val()+'">');$(this).after('<span class="views-throbbing">&nbsp</span>')});$('form',ajax_area).unbind('submit');$('form',ajax_area).submit(function(){$(this).ajaxSubmit({url:url,data:{js:1},type:'POST',success:Drupal.Views.Ajax.previewResponse,error:function(xhr){$('span.views-throbbing').remove();Drupal.Views.Ajax.handleErrors(xhr,url)},dataType:'json'});return false})};Drupal.attachBehaviors(ajax_area)}};Drupal.Views.updatePreviewForm=function(){var url=$(this).attr('action');url=url.replace('nojs','ajax');$('input[type=submit], button',this).after('<span class="views-throbbing">&nbsp</span>');$(this).ajaxSubmit({url:url,data:{js:1},type:'POST',success:Drupal.Views.Ajax.previewResponse,error:function(xhr){$('span.views-throbbing').remove();Drupal.Views.Ajax.handleErrors(xhr,url)},dataType:'json'});return false};Drupal.Views.updatePreviewFilterForm=function(){var url=$(this).attr('action');url=url.replace('nojs','ajax');$('input[type=submit], button',this).after('<span class="views-throbbing">&nbsp</span>');$('input[name=q]',this).remove();$(this).ajaxSubmit({url:url,data:{js:1},type:'GET',success:Drupal.Views.Ajax.previewResponse,error:function(xhr){$('span.views-throbbing').remove();Drupal.Views.Ajax.handleErrors(xhr,url)},dataType:'json'});return false};Drupal.Views.updatePreviewLink=function(){var url=$(this).attr('href');url=url.replace('nojs','ajax');var intern_url=Drupal.Views.getPath(url);if(intern_url.substring(0,17)!='admin/build/views')return true;$(this).addClass('views-throbbing');$.ajax({url:url,data:'js=1',type:'POST',success:Drupal.Views.Ajax.previewResponse,error:function(xhr){$(this).removeClass('views-throbbing');Drupal.Views.Ajax.handleErrors(xhr,url)},dataType:'json'});return false};Drupal.behaviors.ViewsAjaxLinks=function(){$('a.views-ajax-link:not(.views-processed)').addClass('views-processed').click(function(){var url=$(this).attr('href');url=url.replace('nojs','ajax');$(this).addClass('hilite');$('#edit-save').attr('disabled','true');$('#edit-delete').attr('disabled','true');$(this).addClass('views-throbbing');$.ajax({type:"POST",url:url,data:'js=1',success:Drupal.Views.Ajax.ajaxResponse,error:function(xhr){$(this).removeClass('views-throbbing');Drupal.Views.Ajax.handleErrors(xhr,url)},dataType:'json'});return false});$('form.views-ajax-form:not(.views-processed)').addClass('views-processed').submit(function(arg){var url=$(this).attr('action');url=url.replace('nojs','ajax');$(this).ajaxSubmit({url:url,data:{js:1},type:'POST',success:Drupal.Views.Ajax.ajaxResponse,error:function(xhr){$('span.views-throbbing').remove();Drupal.Views.Ajax.handleErrors(xhr,url)},dataType:'json'});return false});$('form#views-ui-preview-form:not(.views-processed)').addClass('views-processed').submit(Drupal.Views.updatePreviewForm);$('div#views-live-preview form:not(.views-processed)').addClass('views-processed').submit(Drupal.Views.updatePreviewFilterForm);$('div#views-live-preview a:not(.views-processed)').addClass('views-processed').click(Drupal.Views.updatePreviewLink)};Drupal.behaviors.syncPreviewDisplay=function(){$("#views-tabset a").click(function(){var href=$(this).attr('href'),display_id=href.substr(11);$("#views-live-preview #preview-display-id").val(display_id)})};Drupal.theme.tableDragChangedWarning=function(){return'<div></div>'};Drupal.Views.Ajax.handleErrors=function(xhr,path){var error_text='';if((xhr.status==500&&xhr.responseText)||xhr.status==200){error_text=xhr.responseText;error_text=error_text.replace("/&(lt|gt);/g",function(m,p){return(p=="lt")?"<":">"});error_text=error_text.replace(/<("[^"]*"|'[^']*'|[^'">])*>/gi,"");error_text=error_text.replace(/[\n]+\s+/g,"\n")}else if(xhr.status==500){error_text=xhr.status+': '+Drupal.t("Internal server error. Please see server or PHP logs for error information.")}else error_text=xhr.status+': '+xhr.statusText;alert(Drupal.t("An error occurred at @path.\n\nError Description: @error",{'@path':path,'@error':error_text}))};
/* Source and licensing information for the above line(s) can be found at http://www.letsdoitworld.org/sites/all/modules/views/js/ajax.js. */
/* Source and licensing information for the line(s) below can be found at http://www.letsdoitworld.org/sites/all/modules/calendar/js/calendar_colorpicker.js. */
Drupal.behaviors.calendarColorpicker=function(context){if($("div.calendar_colorpicker").size()>0)$("div.calendar_colorpicker").each(function(){var farb=$.farbtastic(this),id=$(this).attr("id");$("input.calendar_colorfield").filter("."+id).each(function(){farb.linkTo(this);$(this).click(function(){farb.linkTo(this)})})})};
/* Source and licensing information for the above line(s) can be found at http://www.letsdoitworld.org/sites/all/modules/calendar/js/calendar_colorpicker.js. */
/* Source and licensing information for the line(s) below can be found at http://www.letsdoitworld.org/misc/collapse.js. */
Drupal.toggleFieldset=function(fieldset){if($(fieldset).is('.collapsed')){var content=$('> div:not(.action)',fieldset);$(fieldset).removeClass('collapsed');content.hide();content.slideDown({duration:'fast',easing:'linear',complete:function(){Drupal.collapseScrollIntoView(this.parentNode);this.parentNode.animating=false;$('div.action',fieldset).show()},step:function(){Drupal.collapseScrollIntoView(this.parentNode)}})}else{$('div.action',fieldset).hide();var content=$('> div:not(.action)',fieldset).slideUp('fast',function(){$(this.parentNode).addClass('collapsed');this.parentNode.animating=false})}};Drupal.collapseScrollIntoView=function(node){var h=self.innerHeight||document.documentElement.clientHeight||$('body')[0].clientHeight||0,offset=self.pageYOffset||document.documentElement.scrollTop||$('body')[0].scrollTop||0,posY=$(node).offset().top,fudge=55;if(posY+node.offsetHeight+fudge>h+offset)if(node.offsetHeight>h){window.scrollTo(0,posY)}else window.scrollTo(0,posY+node.offsetHeight-h+fudge)};Drupal.behaviors.collapse=function(context){$('fieldset.collapsible > legend:not(.collapse-processed)',context).each(function(){var fieldset=$(this.parentNode);if($('input.error, textarea.error, select.error',fieldset).size()>0)fieldset.removeClass('collapsed');var text=this.innerHTML;$(this).empty().append($('<a href="#">'+text+'</a>').click(function(){var fieldset=$(this).parents('fieldset:first')[0];if(!fieldset.animating){fieldset.animating=true;Drupal.toggleFieldset(fieldset)};return false})).after($('<div class="fieldset-wrapper"></div>').append(fieldset.children(':not(legend):not(.action)'))).addClass('collapse-processed')})};
/* Source and licensing information for the above line(s) can be found at http://www.letsdoitworld.org/misc/collapse.js. */
/* Source and licensing information for the line(s) below can be found at http://www.letsdoitworld.org/misc/textarea.js. */
Drupal.behaviors.textarea=function(context){$('textarea.resizable:not(.textarea-processed)',context).each(function(){if($(this).is('textarea.teaser:not(.teaser-processed)'))return false;var textarea=$(this).addClass('textarea-processed'),staticOffset=null;$(this).wrap('<div class="resizable-textarea"><span></span></div>').parent().append($('<div class="grippie"></div>').mousedown(startDrag));var grippie=$('div.grippie',$(this).parent())[0];grippie.style.marginRight=(grippie.offsetWidth-$(this)[0].offsetWidth)+'px'
function startDrag(e){staticOffset=textarea.height()-e.pageY;textarea.css('opacity',0.25);$(document).mousemove(performDrag).mouseup(endDrag);return false}
function performDrag(e){textarea.height(Math.max(32,staticOffset+e.pageY)+'px');return false}
function endDrag(e){$(document).unbind("mousemove",performDrag).unbind("mouseup",endDrag);textarea.css('opacity',1)}})};
/* Source and licensing information for the above line(s) can be found at http://www.letsdoitworld.org/misc/textarea.js. */
/* Source and licensing information for the line(s) below can be found at http://www.letsdoitworld.org/misc/autocomplete.js. */
Drupal.behaviors.autocomplete=function(context){var acdb=[];$('input.autocomplete:not(.autocomplete-processed)',context).each(function(){var uri=this.value;if(!acdb[uri])acdb[uri]=new Drupal.ACDB(uri);var input=$('#'+this.id.substr(0,this.id.length-13)).attr('autocomplete','OFF')[0];$(input.form).submit(Drupal.autocompleteSubmit);new Drupal.jsAC(input,acdb[uri]);$(this).addClass('autocomplete-processed')})};Drupal.autocompleteSubmit=function(){return $('#autocomplete').each(function(){this.owner.hidePopup()}).size()==0};Drupal.jsAC=function(input,db){var ac=this;this.input=input;this.db=db;$(this.input).keydown(function(event){return ac.onkeydown(this,event)}).keyup(function(event){ac.onkeyup(this,event)}).blur(function(){ac.hidePopup();ac.db.cancel()})};Drupal.jsAC.prototype.onkeydown=function(input,e){if(!e)e=window.event;switch(e.keyCode){case 40:this.selectDown();return false;case 38:this.selectUp();return false;default:return true}};Drupal.jsAC.prototype.onkeyup=function(input,e){if(!e)e=window.event;switch(e.keyCode){case 16:case 17:case 18:case 20:case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:return true;case 9:case 13:case 27:this.hidePopup(e.keyCode);return true;default:if(input.value.length>0){this.populatePopup()}else this.hidePopup(e.keyCode);return true}};Drupal.jsAC.prototype.select=function(node){this.input.value=node.autocompleteValue};Drupal.jsAC.prototype.selectDown=function(){if(this.selected&&this.selected.nextSibling){this.highlight(this.selected.nextSibling)}else{var lis=$('li',this.popup);if(lis.size()>0)this.highlight(lis.get(0))}};Drupal.jsAC.prototype.selectUp=function(){if(this.selected&&this.selected.previousSibling)this.highlight(this.selected.previousSibling)};Drupal.jsAC.prototype.highlight=function(node){if(this.selected)$(this.selected).removeClass('selected');$(node).addClass('selected');this.selected=node};Drupal.jsAC.prototype.unhighlight=function(node){$(node).removeClass('selected');this.selected=false};Drupal.jsAC.prototype.hidePopup=function(keycode){if(this.selected&&((keycode&&keycode!=46&&keycode!=8&&keycode!=27)||!keycode))this.input.value=this.selected.autocompleteValue;var popup=this.popup;if(popup){this.popup=null;$(popup).fadeOut('fast',function(){$(popup).remove()})};this.selected=false};Drupal.jsAC.prototype.populatePopup=function(){if(this.popup)$(this.popup).remove();this.selected=false;this.popup=document.createElement('div');this.popup.id='autocomplete';this.popup.owner=this;$(this.popup).css({marginTop:this.input.offsetHeight+'px',width:(this.input.offsetWidth-4)+'px',display:'none'});$(this.input).before(this.popup);this.db.owner=this;this.db.search(this.input.value)};Drupal.jsAC.prototype.found=function(matches){if(!this.input.value.length)return false;var ul=document.createElement('ul'),ac=this;for(key in matches){var li=document.createElement('li');$(li).html('<div>'+matches[key]+'</div>').mousedown(function(){ac.select(this)}).mouseover(function(){ac.highlight(this)}).mouseout(function(){ac.unhighlight(this)});li.autocompleteValue=key;$(ul).append(li)};if(this.popup)if(ul.childNodes.length>0){$(this.popup).empty().append(ul).show()}else{$(this.popup).css({visibility:'hidden'});this.hidePopup()}};Drupal.jsAC.prototype.setStatus=function(status){switch(status){case'begin':$(this.input).addClass('throbbing');break;case'cancel':case'error':case'found':$(this.input).removeClass('throbbing');break}};Drupal.ACDB=function(uri){this.uri=uri;this.delay=300;this.cache={}};Drupal.ACDB.prototype.search=function(searchString){var db=this;this.searchString=searchString;if(this.cache[searchString])return this.owner.found(this.cache[searchString]);if(this.timer)clearTimeout(this.timer);this.timer=setTimeout(function(){db.owner.setStatus('begin');$.ajax({type:"GET",url:db.uri+'/'+Drupal.encodeURIComponent(searchString),dataType:'json',success:function(matches){if(typeof matches.status=='undefined'||matches.status!=0){db.cache[searchString]=matches;if(db.searchString==searchString)db.owner.found(matches);db.owner.setStatus('found')}},error:function(xmlhttp){alert(Drupal.ahahError(xmlhttp,db.uri))}})},this.delay)};Drupal.ACDB.prototype.cancel=function(){if(this.owner)this.owner.setStatus('cancel');if(this.timer)clearTimeout(this.timer);this.searchString=''};
/* Source and licensing information for the above line(s) can be found at http://www.letsdoitworld.org/misc/autocomplete.js. */
/* Source and licensing information for the line(s) below can be found at http://www.letsdoitworld.org/sites/all/modules/views/js/dependent.js. */
Drupal.Views=Drupal.Views||{};Drupal.Views.dependent={bindings:{},activeBindings:{},activeTriggers:[]};Drupal.Views.dependent.inArray=function(array,search_term){var i=array.length;if(i>0)do{if(array[i]==search_term)return true}while(i--);return false};Drupal.Views.dependent.autoAttach=function(){for(i in Drupal.Views.dependent.activeTriggers)jQuery(Drupal.Views.dependent.activeTriggers[i]).unbind('change');Drupal.Views.dependent.activeTriggers=[];Drupal.Views.dependent.activeBindings={};Drupal.Views.dependent.bindings={};if(!Drupal.settings.viewsAjax)return;for(id in Drupal.settings.viewsAjax.formRelationships){Drupal.Views.dependent.activeBindings[id]=0;for(bind_id in Drupal.settings.viewsAjax.formRelationships[id].values){if(!Drupal.Views.dependent.bindings[bind_id])Drupal.Views.dependent.bindings[bind_id]=[];Drupal.Views.dependent.bindings[bind_id].push(id);if(bind_id.substring(0,6)=='radio:'){var trigger_id="input[name='"+bind_id.substring(6)+"']"}else var trigger_id='#'+bind_id;Drupal.Views.dependent.activeTriggers.push(trigger_id);if(jQuery(trigger_id).attr('type')=='checkbox')$(trigger_id).parent().addClass('hidden-options');var getValue=function(item,trigger){if(item.substring(0,6)=='radio:'){var val=jQuery(trigger+':checked').val()}else switch(jQuery(trigger).attr('type')){case'checkbox':var val=jQuery(trigger).attr('checked')||0;if(val){$(trigger).parent().removeClass('hidden-options').addClass('expanded-options')}else $(trigger).parent().removeClass('expanded-options').addClass('hidden-options');break;default:var val=jQuery(trigger).val()};return val},setChangeTrigger=function(trigger_id,bind_id){var changeTrigger=function(){var val=getValue(bind_id,trigger_id);for(i in Drupal.Views.dependent.bindings[bind_id]){var id=Drupal.Views.dependent.bindings[bind_id][i];if(typeof id!='string')continue;if(!Drupal.Views.dependent.activeBindings[id])Drupal.Views.dependent.activeBindings[id]={};if(Drupal.Views.dependent.inArray(Drupal.settings.viewsAjax.formRelationships[id].values[bind_id],val)){Drupal.Views.dependent.activeBindings[id][bind_id]='bind'}else delete Drupal.Views.dependent.activeBindings[id][bind_id];var len=0;for(i in Drupal.Views.dependent.activeBindings[id])len++;var object=jQuery('#'+id+'-wrapper');if(!object.size())object=jQuery('#'+id).parent();var rel_num=Drupal.settings.viewsAjax.formRelationships[id].num;if(typeof rel_num==='object')rel_num=Drupal.settings.viewsAjax.formRelationships[id].num[0];if(rel_num<=len){object.show(0);object.addClass('dependent-options')}else object.hide(0)}};jQuery(trigger_id).change(function(){changeTrigger(trigger_id,bind_id)});changeTrigger(trigger_id,bind_id)};setChangeTrigger(trigger_id,bind_id)}}};Drupal.behaviors.viewsDependent=function(context){Drupal.Views.dependent.autoAttach();$("select.views-master-dependent:not(.views-processed)").addClass('views-processed').change(function(){var val=$(this).val();if(val=='all'){$('.views-dependent-all').show(0)}else{$('.views-dependent-all').hide(0);$('.views-dependent-'+val).show(0)}}).trigger('change')};
/* Source and licensing information for the above line(s) can be found at http://www.letsdoitworld.org/sites/all/modules/views/js/dependent.js. */
/* Source and licensing information for the line(s) below can be found at http://www.letsdoitworld.org/sites/all/modules/jquery_update/replace/farbtastic.js. */
jQuery.fn.farbtastic=function(callback){$.farbtastic(this,callback);return this};jQuery.farbtastic=function(container,callback){var container=$(container).get(0);return container.farbtastic||(container.farbtastic=new jQuery._farbtastic(container,callback))};jQuery._farbtastic=function(container,callback){var fb=this;$(container).html('<div class="farbtastic"><div class="color"></div><div class="wheel"></div><div class="overlay"></div><div class="h-marker marker"></div><div class="sl-marker marker"></div></div>');var e=$('.farbtastic',container);fb.wheel=$('.wheel',container).get(0);fb.radius=84;fb.square=100;fb.width=194;if(navigator.appVersion.match(/MSIE [0-6]\./))$('*',e).each(function(){if(this.currentStyle.backgroundImage!='none'){var image=this.currentStyle.backgroundImage;image=this.currentStyle.backgroundImage.substring(5,image.length-2);$(this).css({backgroundImage:'none',filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='"+image+"')"})}});fb.linkTo=function(callback){if(typeof fb.callback=='object')$(fb.callback).unbind('keyup',fb.updateValue);fb.color=null;if(typeof callback=='function'){fb.callback=callback}else if(typeof callback=='object'||typeof callback=='string'){fb.callback=$(callback);fb.callback.bind('keyup',fb.updateValue);if(fb.callback.get(0).value)fb.setColor(fb.callback.get(0).value)};return this};fb.updateValue=function(event){if(this.value&&this.value!=fb.color)fb.setColor(this.value)};fb.setColor=function(color){var unpack=fb.unpack(color);if(fb.color!=color&&unpack){fb.color=color;fb.rgb=unpack;fb.hsl=fb.RGBToHSL(fb.rgb);fb.updateDisplay()};return this};fb.setHSL=function(hsl){fb.hsl=hsl;fb.rgb=fb.HSLToRGB(hsl);fb.color=fb.pack(fb.rgb);fb.updateDisplay();return this};fb.widgetCoords=function(event){var offset=$(fb.wheel).offset();return{x:(event.pageX-offset.left)-fb.width/2,y:(event.pageY-offset.top)-fb.width/2}};fb.mousedown=function(event){if(!document.dragging){$(document).bind('mousemove',fb.mousemove).bind('mouseup',fb.mouseup);document.dragging=true};var pos=fb.widgetCoords(event);fb.circleDrag=Math.max(Math.abs(pos.x),Math.abs(pos.y))*2>fb.square;fb.mousemove(event);return false};fb.mousemove=function(event){var pos=fb.widgetCoords(event);if(fb.circleDrag){var hue=Math.atan2(pos.x,-pos.y)/6.28;if(hue<0)hue+=1;fb.setHSL([hue,fb.hsl[1],fb.hsl[2]])}else{var sat=Math.max(0,Math.min(1,-(pos.x/fb.square)+.5)),lum=Math.max(0,Math.min(1,-(pos.y/fb.square)+.5));fb.setHSL([fb.hsl[0],sat,lum])};return false};fb.mouseup=function(){$(document).unbind('mousemove',fb.mousemove);$(document).unbind('mouseup',fb.mouseup);document.dragging=false};fb.updateDisplay=function(){var angle=fb.hsl[0]*6.28;$('.h-marker',e).css({left:Math.round(Math.sin(angle)*fb.radius+fb.width/2)+'px',top:Math.round(-Math.cos(angle)*fb.radius+fb.width/2)+'px'});$('.sl-marker',e).css({left:Math.round(fb.square*(.5-fb.hsl[1])+fb.width/2)+'px',top:Math.round(fb.square*(.5-fb.hsl[2])+fb.width/2)+'px'});$('.color',e).css('backgroundColor',fb.pack(fb.HSLToRGB([fb.hsl[0],1,0.5])));if(typeof fb.callback=='object'){$(fb.callback).css({backgroundColor:fb.color,color:fb.hsl[2]>0.5?'#000':'#fff'});$(fb.callback).each(function(){if(this.value&&this.value!=fb.color)this.value=fb.color})}else if(typeof fb.callback=='function')fb.callback.call(fb,fb.color)};fb.pack=function(rgb){var r=Math.round(rgb[0]*255),g=Math.round(rgb[1]*255),b=Math.round(rgb[2]*255);return'#'+(r<16?'0':'')+r.toString(16)+(g<16?'0':'')+g.toString(16)+(b<16?'0':'')+b.toString(16)};fb.unpack=function(color){if(color.length==7){return[parseInt('0x'+color.substring(1,3))/255,parseInt('0x'+color.substring(3,5))/255,parseInt('0x'+color.substring(5,7))/255]}else if(color.length==4)return[parseInt('0x'+color.substring(1,2))/15,parseInt('0x'+color.substring(2,3))/15,parseInt('0x'+color.substring(3,4))/15]};fb.HSLToRGB=function(hsl){var m1,m2,r,g,b,h=hsl[0],s=hsl[1],l=hsl[2];m2=(l<=0.5)?l*(s+1):l+s-l*s;m1=l*2-m2;return[this.hueToRGB(m1,m2,h+0.33333),this.hueToRGB(m1,m2,h),this.hueToRGB(m1,m2,h-0.33333)]};fb.hueToRGB=function(m1,m2,h){h=(h<0)?h+1:((h>1)?h-1:h);if(h*6<1)return m1+(m2-m1)*h*6;if(h*2<1)return m2;if(h*3<2)return m1+(m2-m1)*(0.66666-h)*6;return m1};fb.RGBToHSL=function(rgb){var min,max,delta,h,s,l,r=rgb[0],g=rgb[1],b=rgb[2];min=Math.min(r,Math.min(g,b));max=Math.max(r,Math.max(g,b));delta=max-min;l=(min+max)/2;s=0;if(l>0&&l<1)s=delta/(l<0.5?(2*l):(2-2*l));h=0;if(delta>0){if(max==r&&max!=g)h+=(g-b)/delta;if(max==g&&max!=b)h+=(2+(b-r)/delta);if(max==b&&max!=r)h+=(4+(r-g)/delta);h/=6};return[h,s,l]};$('*',e).mousedown(fb.mousedown);fb.setColor('#000000');if(callback)fb.linkTo(callback)};
/* Source and licensing information for the above line(s) can be found at http://www.letsdoitworld.org/sites/all/modules/jquery_update/replace/farbtastic.js. */
/* Source and licensing information for the line(s) below can be found at http://www.letsdoitworld.org/sites/all/modules/jquery_update/replace/jquery.form.js. */
(function(b){function o(){if(b.fn.ajaxSubmit.debug){var a="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(a)}else window.opera&&window.opera.postError&&window.opera.postError(a)}};b.fn.ajaxSubmit=function(a){function d(){function r(){var p=h.attr("target"),n=h.attr("action");j.setAttribute("target",z);j.getAttribute("method")!="POST"&&j.setAttribute("method","POST");j.getAttribute("action")!=g.url&&j.setAttribute("action",g.url);g.skipEncodingOverride||h.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});g.timeout&&setTimeout(function(){C=true;s()},g.timeout);var m=[];try{if(g.extraData)for(var u in g.extraData)m.push(b('<input type="hidden" name="'+u+'" value="'+g.extraData[u]+'" />').appendTo(j)[0]);t.appendTo("body");t.data("form-plugin-onload",s);j.submit()}finally{j.setAttribute("action",n);p?j.setAttribute("target",p):h.removeAttr("target");b(m).remove()}}
function s(){if(!D){var p=true;try{if(C)throw"timeout";var n,m;m=v.contentWindow?v.contentWindow.document:v.contentDocument?v.contentDocument:v.document;var u=g.dataType=="xml"||m.XMLDocument||b.isXMLDoc(m);o("isXml="+u);if(!u&&(m.body==null||m.body.innerHTML=="")){if(--G){o("requeing onLoad callback, DOM not available");setTimeout(s,250);return};o("Could not access iframe DOM after 100 tries.");return};o("response detected");D=true;i.responseText=m.body?m.body.innerHTML:null;i.responseXML=m.XMLDocument?m.XMLDocument:m;i.getResponseHeader=function(H){return{"content-type":g.dataType}[H]};if(g.dataType=="json"||g.dataType=="script"){var E=m.getElementsByTagName("textarea")[0];if(E){i.responseText=E.value}else{var F=m.getElementsByTagName("pre")[0];if(F)i.responseText=F.innerHTML}}else if(g.dataType=="xml"&&!i.responseXML&&i.responseText!=null)i.responseXML=A(i.responseText);n=b.httpData(i,g.dataType)}catch(B){o("error caught:",B);p=false;i.error=B;b.handleError(g,i,"error",B)};if(p){g.success(n,"success");w&&b.event.trigger("ajaxSuccess",[i,g])};w&&b.event.trigger("ajaxComplete",[i,g]);w&&!--b.active&&b.event.trigger("ajaxStop");if(g.complete)g.complete(i,p?"success":"error");setTimeout(function(){t.removeData("form-plugin-onload");t.remove();i.responseXML=null},100)}}
function A(p,n){if(window.ActiveXObject){n=new ActiveXObject("Microsoft.XMLDOM");n.async="false";n.loadXML(p)}else n=(new DOMParser()).parseFromString(p,"text/xml");return n&&n.documentElement&&n.documentElement.tagName!="parsererror"?n:null};var j=h[0];if(b(":input[name=submit]",j).length){alert('Error: Form elements must not be named "submit".')}else{var g=b.extend({},b.ajaxSettings,a),q=b.extend(true,{},b.extend(true,{},b.ajaxSettings),g),z="jqFormIO"+(new Date()).getTime(),t=b('<iframe id="'+z+'" name="'+z+'" src="'+g.iframeSrc+'" onload="(jQuery(this).data(\'form-plugin-onload\'))()" />'),v=t[0];t.css({position:"absolute",top:"-1000px",left:"-1000px"});var i={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){this.aborted=1;t.attr("src",g.iframeSrc)}},w=g.global;w&&!b.active++&&b.event.trigger("ajaxStart");w&&b.event.trigger("ajaxSend",[i,g]);if(q.beforeSend&&q.beforeSend(i,q)===false){q.global&&b.active--}else if(!i.aborted){var D=false,C=0;if(q=j.clk){var y=q.name;if(y&&!q.disabled){g.extraData=g.extraData||{};g.extraData[y]=q.value;if(q.type=="image"){g.extraData[y+".x"]=j.clk_x;g.extraData[y+".y"]=j.clk_y}}};g.forceSync?r():setTimeout(r,10);var G=100}}};if(!this.length){o("ajaxSubmit: skipping submit process - no element selected");return this};if(typeof a=="function")a={success:a};var e=b.trim(this.attr("action"));if(e)e=(e.match(/^([^#]+)/)||[])[1];e=e||window.location.href||"";a=b.extend({url:e,type:this.attr("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},a||{});e={};this.trigger("form-pre-serialize",[this,a,e]);if(e.veto){o("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this};if(a.beforeSerialize&&a.beforeSerialize(this,a)===false){o("ajaxSubmit: submit aborted via beforeSerialize callback");return this};var f=this.formToArray(a.semantic);if(a.data){a.extraData=a.data;for(var c in a.data)if(a.data[c]instanceof Array){for(var l in a.data[c])f.push({name:c,value:a.data[c][l]})}else f.push({name:c,value:a.data[c]})};if(a.beforeSubmit&&a.beforeSubmit(f,this,a)===false){o("ajaxSubmit: submit aborted via beforeSubmit callback");return this};this.trigger("form-submit-validate",[f,this,a,e]);if(e.veto){o("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this};c=b.param(f);if(a.type.toUpperCase()=="GET"){a.url+=(a.url.indexOf("?")>=0?"&":"?")+c;a.data=null}else a.data=c;var h=this,k=[];a.resetForm&&k.push(function(){h.resetForm()});a.clearForm&&k.push(function(){h.clearForm()});if(!a.dataType&&a.target){var x=a.success||function(){};k.push(function(r){var s=a.replaceTarget?"replaceWith":"html";b(a.target)[s](r).each(x,arguments)})}else a.success&&k.push(a.success);a.success=function(r,s,A){for(var j=0,g=k.length;j<g;j++)k[j].apply(a,[r,s,A||h,h])};c=b("input:file",this).fieldValue();l=false;for(e=0;e<c.length;e++)if(c[e])l=true;if(c.length&&a.iframe!==false||a.iframe||l||0){a.closeKeepAlive?b.get(a.closeKeepAlive,d):d()}else b.ajax(a);this.trigger("form-submit-notify",[this,a]);return this};b.fn.ajaxForm=function(a){return this.ajaxFormUnbind().bind("submit.form-plugin",function(d){d.preventDefault();b(this).ajaxSubmit(a)}).bind("click.form-plugin",function(d){var e=d.target,f=b(e);if(!f.is(":submit,input:image")){e=f.closest(":submit");if(e.length==0)return;e=e[0]};var c=this;c.clk=e;if(e.type=="image")if(d.offsetX!=undefined){c.clk_x=d.offsetX;c.clk_y=d.offsetY}else if(typeof b.fn.offset=="function"){f=f.offset();c.clk_x=d.pageX-f.left;c.clk_y=d.pageY-f.top}else{c.clk_x=d.pageX-e.offsetLeft;c.clk_y=d.pageY-e.offsetTop};setTimeout(function(){c.clk=c.clk_x=c.clk_y=null},100)})};b.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};b.fn.formToArray=function(a){var d=[];if(this.length==0)return d;var e=this[0],f=a?e.getElementsByTagName("*"):e.elements;if(!f)return d;for(var c=0,l=f.length;c<l;c++){var h=f[c],k=h.name;if(k)if(a&&e.clk&&h.type=="image"){if(!h.disabled&&e.clk==h){d.push({name:k,value:b(h).val()});d.push({name:k+".x",value:e.clk_x},{name:k+".y",value:e.clk_y})}}else if((h=b.fieldValue(h,true))&&h.constructor==Array){for(var x=0,r=h.length;x<r;x++)d.push({name:k,value:h[x]})}else h!==null&&typeof h!="undefined"&&d.push({name:k,value:h})};if(!a&&e.clk){a=b(e.clk);f=a[0];if((k=f.name)&&!f.disabled&&f.type=="image"){d.push({name:k,value:a.val()});d.push({name:k+".x",value:e.clk_x},{name:k+".y",value:e.clk_y})}};return d};b.fn.formSerialize=function(a){return b.param(this.formToArray(a))};b.fn.fieldSerialize=function(a){var d=[];this.each(function(){var e=this.name;if(e){var f=b.fieldValue(this,a);if(f&&f.constructor==Array){for(var c=0,l=f.length;c<l;c++)d.push({name:e,value:f[c]})}else f!==null&&typeof f!="undefined"&&d.push({name:this.name,value:f})}});return b.param(d)};b.fn.fieldValue=function(a){for(var d=[],e=0,f=this.length;e<f;e++){var c=b.fieldValue(this[e],a);c===null||typeof c=="undefined"||c.constructor==Array&&!c.length||(c.constructor==Array?b.merge(d,c):d.push(c))};return d};b.fieldValue=function(a,d){var e=a.name,f=a.type,c=a.tagName.toLowerCase();if(typeof d=="undefined")d=true;if(d&&(!e||a.disabled||f=="reset"||f=="button"||(f=="checkbox"||f=="radio")&&!a.checked||(f=="submit"||f=="image")&&a.form&&a.form.clk!=a||c=="select"&&a.selectedIndex==-1))return null;if(c=="select"){c=a.selectedIndex;if(c<0)return null;d=[];a=a.options;e=(f=f=="select-one")?c+1:a.length;for(c=f?c:0;c<e;c++){var l=a[c];if(l.selected){var h=l.value;h||(h=l.attributes&&l.attributes.value&&!l.attributes.value.specified?l.text:l.value);if(f)return h;d.push(h)}};return d};return a.value};b.fn.clearForm=function(){return this.each(function(){b("input,select,textarea",this).clearFields()})};b.fn.clearFields=b.fn.clearInputs=function(){return this.each(function(){var a=this.type,d=this.tagName.toLowerCase();if(a=="text"||a=="password"||d=="textarea"){this.value=""}else if(a=="checkbox"||a=="radio"){this.checked=false}else if(d=="select")this.selectedIndex=-1})};b.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||typeof this.reset=="object"&&!this.reset.nodeType)this.reset()})};b.fn.enable=function(a){if(a==undefined)a=true;return this.each(function(){this.disabled=!a})};b.fn.selected=function(a){if(a==undefined)a=true;return this.each(function(){var d=this.type;if(d=="checkbox"||d=="radio"){this.checked=a}else if(this.tagName.toLowerCase()=="option"){d=b(this).parent("select");a&&d[0]&&d[0].type=="select-one"&&d.find("option").selected(false);this.selected=a}})}})(jQuery);
/* Source and licensing information for the above line(s) can be found at http://www.letsdoitworld.org/sites/all/modules/jquery_update/replace/jquery.form.js. */
/* Source and licensing information for the line(s) below can be found at http://www.letsdoitworld.org/sites/all/modules/jquery_update/replace/tabledrag.js. */
Drupal.behaviors.tableDrag=function(context){for(var base in Drupal.settings.tableDrag)if(!$('#'+base+'.tabledrag-processed',context).size()){var tableSettings=Drupal.settings.tableDrag[base];$('#'+base).filter(':not(.tabledrag-processed)').each(function(){Drupal.tableDrag[base]=new Drupal.tableDrag(this,tableSettings)});$('#'+base).addClass('tabledrag-processed')}};Drupal.tableDrag=function(table,tableSettings){var self=this;this.table=table;this.tableSettings=tableSettings;this.dragObject=null;this.rowObject=null;this.oldRowElement=null;this.oldY=0;this.changed=false;this.maxDepth=0;this.rtl=$(this.table).css('direction')=='rtl'?-1:1;this.scrollSettings={amount:4,interval:50,trigger:70};this.scrollInterval=null;this.scrollY=0;this.windowHeight=0;this.indentEnabled=false;for(group in tableSettings)for(n in tableSettings[group]){if(tableSettings[group][n]['relationship']=='parent')this.indentEnabled=true;if(tableSettings[group][n]['limit']>0)this.maxDepth=tableSettings[group][n]['limit']};if(this.indentEnabled){this.indentCount=1;var indent=Drupal.theme('tableDragIndentation'),testCell=$('tr.draggable:first td:first',table).prepend(indent).prepend(indent);this.indentAmount=$('.indentation',testCell).get(1).offsetLeft-$('.indentation',testCell).get(0).offsetLeft;$('.indentation',testCell).slice(0,2).remove()};$('tr.draggable',table).each(function(){self.makeDraggable(this)});this.hideColumns();$(document).bind('mousemove',function(event){return self.dragRow(event,self)});$(document).bind('mouseup',function(event){return self.dropRow(event,self)})};Drupal.tableDrag.prototype.hideColumns=function(){for(var group in this.tableSettings){for(var d in this.tableSettings[group]){var field=$('.'+this.tableSettings[group][d]['target']+':first',this.table);if(field.size()&&this.tableSettings[group][d]['hidden']){var hidden=this.tableSettings[group][d]['hidden'],cell=field.parents('td:first');break}};if(hidden&&cell[0]&&cell.css('display')!='none'){var columnIndex=$('td',cell.parent()).index(cell.get(0))+1,headerIndex=$('td:not(:hidden)',cell.parent()).index(cell.get(0))+1;$('tr',this.table).each(function(){var row=$(this),parentTag=row.parent().get(0).tagName.toLowerCase(),index=(parentTag=='thead')?headerIndex:columnIndex;row.children().each(function(n){if(n<index)index-=(this.colSpan&&this.colSpan>1)?this.colSpan-1:0});if(index>0){cell=row.children(':nth-child('+index+')');if(cell[0].colSpan>1){cell[0].colSpan=cell[0].colSpan-1}else parentTag=='thead'?cell.remove():cell.css('display','none')}})}}};Drupal.tableDrag.prototype.rowSettings=function(group,row){var field=$('.'+group,row);for(delta in this.tableSettings[group]){var targetClass=this.tableSettings[group][delta]['target'];if(field.is('.'+targetClass)){var rowSettings=new Object();for(var n in this.tableSettings[group][delta])rowSettings[n]=this.tableSettings[group][delta][n];return rowSettings}}};Drupal.tableDrag.prototype.makeDraggable=function(item){var self=this,handle=$('<a href="#" class="tabledrag-handle"><div class="handle">&nbsp;</div></a>').attr('title',Drupal.t('Drag to re-order'));if($('td:first .indentation:last',item).after(handle).size()){self.indentCount=Math.max($('.indentation',item).size(),self.indentCount)}else $('td:first',item).prepend(handle);handle.hover(function(){self.dragObject==null?$(this).addClass('tabledrag-handle-hover'):null},function(){self.dragObject==null?$(this).removeClass('tabledrag-handle-hover'):null});handle.mousedown(function(event){self.dragObject=new Object();self.dragObject.initMouseOffset=self.getMouseOffset(item,event);self.dragObject.initMouseCoords=self.mouseCoords(event);if(self.indentEnabled)self.dragObject.indentMousePos=self.dragObject.initMouseCoords;if(self.rowObject)$('a.tabledrag-handle',self.rowObject.element).blur();self.rowObject=new self.row(item,'mouse',self.indentEnabled,self.maxDepth,true);self.table.topY=$(self.table).offset().top;self.table.bottomY=self.table.topY+self.table.offsetHeight;$(this).addClass('tabledrag-handle-hover');$(item).addClass('drag');$('body').addClass('drag');if(self.oldRowElement)$(self.oldRowElement).removeClass('drag-previous');if(navigator.userAgent.indexOf('MSIE 6.')!=-1)$('select',this.table).css('display','none');self.safeBlur=false;self.onDrag();return false});handle.click(function(){return false});handle.focus(function(){$(this).addClass('tabledrag-handle-hover');self.safeBlur=true});handle.blur(function(event){$(this).removeClass('tabledrag-handle-hover');if(self.rowObject&&self.safeBlur)self.dropRow(event,self)});handle.keydown(function(event){if(event.keyCode!=9&&!self.rowObject)self.rowObject=new self.row(item,'keyboard',self.indentEnabled,self.maxDepth,true);var keyChange=false;switch(event.keyCode){case 37:case 63234:keyChange=true;self.rowObject.indent(-1*self.rtl);break;case 38:case 63232:var previousRow=$(self.rowObject.element).prev('tr').get(0);while(previousRow&&$(previousRow).is(':hidden'))previousRow=$(previousRow).prev('tr').get(0);if(previousRow){self.safeBlur=false;self.rowObject.direction='up';keyChange=true;if($(item).is('.tabledrag-root')){var groupHeight=0;while(previousRow&&$('.indentation',previousRow).size()){previousRow=$(previousRow).prev('tr').get(0);groupHeight+=$(previousRow).is(':hidden')?0:previousRow.offsetHeight};if(previousRow){self.rowObject.swap('before',previousRow);window.scrollBy(0,-groupHeight)}}else if(self.table.tBodies[0].rows[0]!=previousRow||$(previousRow).is('.draggable')){self.rowObject.swap('before',previousRow);self.rowObject.interval=null;self.rowObject.indent(0);window.scrollBy(0,-parseInt(item.offsetHeight))};handle.get(0).focus()};break;case 39:case 63235:keyChange=true;self.rowObject.indent(1*self.rtl);break;case 40:case 63233:var nextRow=$(self.rowObject.group).filter(':last').next('tr').get(0);while(nextRow&&$(nextRow).is(':hidden'))nextRow=$(nextRow).next('tr').get(0);if(nextRow){self.safeBlur=false;self.rowObject.direction='down';keyChange=true;if($(item).is('.tabledrag-root')){var groupHeight=0;nextGroup=new self.row(nextRow,'keyboard',self.indentEnabled,self.maxDepth,false);if(nextGroup){$(nextGroup.group).each(function(){groupHeight+=$(this).is(':hidden')?0:this.offsetHeight});nextGroupRow=$(nextGroup.group).filter(':last').get(0);self.rowObject.swap('after',nextGroupRow);window.scrollBy(0,parseInt(groupHeight))}}else{self.rowObject.swap('after',nextRow);self.rowObject.interval=null;self.rowObject.indent(0);window.scrollBy(0,parseInt(item.offsetHeight))};handle.get(0).focus()};break};if(self.rowObject&&self.rowObject.changed==true){$(item).addClass('drag');if(self.oldRowElement)$(self.oldRowElement).removeClass('drag-previous');self.oldRowElement=item;self.restripeTable();self.onDrag()};if(keyChange)return false});handle.keypress(function(event){switch(event.keyCode){case 37:case 38:case 39:case 40:return false}})};Drupal.tableDrag.prototype.dragRow=function(event,self){if(self.dragObject){self.currentMouseCoords=self.mouseCoords(event);var y=self.currentMouseCoords.y-self.dragObject.initMouseOffset.y,x=self.currentMouseCoords.x-self.dragObject.initMouseOffset.x;if(y!=self.oldY){self.rowObject.direction=y>self.oldY?'down':'up';self.oldY=y;var scrollAmount=self.checkScroll(self.currentMouseCoords.y);clearInterval(self.scrollInterval);if(scrollAmount>0&&self.rowObject.direction=='down'||scrollAmount<0&&self.rowObject.direction=='up')self.setScroll(scrollAmount);var currentRow=self.findDropTargetRow(x,y);if(currentRow){if(self.rowObject.direction=='down'){self.rowObject.swap('after',currentRow,self)}else self.rowObject.swap('before',currentRow,self);self.restripeTable()}};if(self.indentEnabled){var xDiff=self.currentMouseCoords.x-self.dragObject.indentMousePos.x,indentDiff=Math.round(xDiff/self.indentAmount*self.rtl),indentChange=self.rowObject.indent(indentDiff);self.dragObject.indentMousePos.x+=self.indentAmount*indentChange*self.rtl;self.indentCount=Math.max(self.indentCount,self.rowObject.indents)};return false}};Drupal.tableDrag.prototype.dropRow=function(event,self){if(self.rowObject!=null){var droppedRow=self.rowObject.element;if(self.rowObject.changed==true){self.updateFields(droppedRow);for(var group in self.tableSettings){var rowSettings=self.rowSettings(group,droppedRow);if(rowSettings.relationship=='group')for(n in self.rowObject.children)self.updateField(self.rowObject.children[n],group)};self.rowObject.markChanged();if(self.changed==false){$(Drupal.theme('tableDragChangedWarning')).insertAfter(self.table).hide().fadeIn('slow');self.changed=true}};if(self.indentEnabled)self.rowObject.removeIndentClasses();if(self.oldRowElement)$(self.oldRowElement).removeClass('drag-previous');$(droppedRow).removeClass('drag').addClass('drag-previous');self.oldRowElement=droppedRow;self.onDrop();self.rowObject=null};if(self.dragObject!=null){$('.tabledrag-handle',droppedRow).removeClass('tabledrag-handle-hover');self.dragObject=null;$('body').removeClass('drag');clearInterval(self.scrollInterval);if(navigator.userAgent.indexOf('MSIE 6.')!=-1)$('select',this.table).css('display','block')}};Drupal.tableDrag.prototype.mouseCoords=function(event){if(event.pageX||event.pageY)return{x:event.pageX,y:event.pageY};return{x:event.clientX+document.body.scrollLeft-document.body.clientLeft,y:event.clientY+document.body.scrollTop-document.body.clientTop}};Drupal.tableDrag.prototype.getMouseOffset=function(target,event){var docPos=$(target).offset(),mousePos=this.mouseCoords(event);return{x:mousePos.x-docPos.left,y:mousePos.y-docPos.top}};Drupal.tableDrag.prototype.findDropTargetRow=function(x,y){var rows=this.table.tBodies[0].rows;for(var n=0;n<rows.length;n++){var row=rows[n],indentDiff=0,rowY=$(row).offset().top;if(row.offsetHeight==0){var rowHeight=parseInt(row.firstChild.offsetHeight)/2}else var rowHeight=parseInt(row.offsetHeight)/2;if((y>(rowY-rowHeight))&&(y<(rowY+rowHeight))){if(this.indentEnabled){for(n in this.rowObject.group)if(this.rowObject.group[n]==row)return null}else if(row==this.rowObject.element)return null;if(!this.rowObject.isValidSwap(row))return null;while($(row).is(':hidden')&&$(row).prev('tr').is(':hidden'))row=$(row).prev('tr').get(0);return row}};return null};Drupal.tableDrag.prototype.updateFields=function(changedRow){for(var group in this.tableSettings)this.updateField(changedRow,group)};Drupal.tableDrag.prototype.updateField=function(changedRow,group){var rowSettings=this.rowSettings(group,changedRow);if(rowSettings.relationship=='self'||rowSettings.relationship=='group'){var sourceRow=changedRow}else if(rowSettings.relationship=='sibling'){var previousRow=$(changedRow).prev('tr').get(0),nextRow=$(changedRow).next('tr').get(0),sourceRow=changedRow;if($(previousRow).is('.draggable')&&$('.'+group,previousRow).length){if(this.indentEnabled){if($('.indentations',previousRow).size()==$('.indentations',changedRow))sourceRow=previousRow}else sourceRow=previousRow}else if($(nextRow).is('.draggable')&&$('.'+group,nextRow).length)if(this.indentEnabled){if($('.indentations',nextRow).size()==$('.indentations',changedRow))sourceRow=nextRow}else sourceRow=nextRow}else if(rowSettings.relationship=='parent'){var previousRow=$(changedRow).prev('tr');while(previousRow.length&&$('.indentation',previousRow).length>=this.rowObject.indents)previousRow=previousRow.prev('tr');if(previousRow.length){sourceRow=previousRow[0]}else{sourceRow=$('tr.draggable:first').get(0);if(sourceRow==this.rowObject.element)sourceRow=$(this.rowObject.group[this.rowObject.group.length-1]).next('tr.draggable').get(0);var useSibling=true}};this.copyDragClasses(sourceRow,changedRow,group);rowSettings=this.rowSettings(group,changedRow);if(useSibling){rowSettings.relationship='sibling';rowSettings.source=rowSettings.target};var targetClass='.'+rowSettings.target,targetElement=$(targetClass,changedRow).get(0);if(targetElement){var sourceClass='.'+rowSettings.source,sourceElement=$(sourceClass,sourceRow).get(0);switch(rowSettings.action){case'depth':targetElement.value=$('.indentation',$(sourceElement).parents('tr:first')).size();break;case'match':targetElement.value=sourceElement.value;break;case'order':var siblings=this.rowObject.findSiblings(rowSettings);if($(targetElement).is('select')){var values=new Array();$('option',targetElement).each(function(){values.push(this.value)});var maxVal=values[values.length-1];$(targetClass,siblings).each(function(){if(values.length>0){this.value=values.shift()}else this.value=maxVal})}else{var weight=parseInt($(targetClass,siblings[0]).val())||0;$(targetClass,siblings).each(function(){this.value=weight;weight++})};break}}};Drupal.tableDrag.prototype.copyDragClasses=function(sourceRow,targetRow,group){var sourceElement=$('.'+group,sourceRow),targetElement=$('.'+group,targetRow);if(sourceElement.length&&targetElement.length)targetElement[0].className=sourceElement[0].className};Drupal.tableDrag.prototype.checkScroll=function(cursorY){var de=document.documentElement,b=document.body,windowHeight=this.windowHeight=window.innerHeight||(de.clientHeight&&de.clientWidth!=0?de.clientHeight:b.offsetHeight),scrollY=this.scrollY=(document.all?(!de.scrollTop?b.scrollTop:de.scrollTop):(window.pageYOffset?window.pageYOffset:window.scrollY)),trigger=this.scrollSettings.trigger,delta=0;if(cursorY-scrollY>windowHeight-trigger){delta=trigger/(windowHeight+scrollY-cursorY);delta=(delta>0&&delta<trigger)?delta:trigger;return delta*this.scrollSettings.amount}else if(cursorY-scrollY<trigger){delta=trigger/(cursorY-scrollY);delta=(delta>0&&delta<trigger)?delta:trigger;return-delta*this.scrollSettings.amount}};Drupal.tableDrag.prototype.setScroll=function(scrollAmount){var self=this;this.scrollInterval=setInterval(function(){self.checkScroll(self.currentMouseCoords.y);var aboveTable=self.scrollY>self.table.topY,belowTable=self.scrollY+self.windowHeight<self.table.bottomY;if(scrollAmount>0&&belowTable||scrollAmount<0&&aboveTable)window.scrollBy(0,scrollAmount)},this.scrollSettings.interval)};Drupal.tableDrag.prototype.restripeTable=function(){$('tr.draggable',this.table).filter(':odd').filter('.odd').removeClass('odd').addClass('even').end().end().filter(':even').filter('.even').removeClass('even').addClass('odd')};Drupal.tableDrag.prototype.onDrag=function(){return null};Drupal.tableDrag.prototype.onDrop=function(){return null};Drupal.tableDrag.prototype.row=function(tableRow,method,indentEnabled,maxDepth,addClasses){this.element=tableRow;this.method=method;this.group=new Array(tableRow);this.groupDepth=$('.indentation',tableRow).size();this.changed=false;this.table=$(tableRow).parents('table:first').get(0);this.indentEnabled=indentEnabled;this.maxDepth=maxDepth;this.direction='';if(this.indentEnabled){this.indents=$('.indentation',tableRow).size();this.children=this.findChildren(addClasses);this.group=$.merge(this.group,this.children);for(var n=0;n<this.group.length;n++)this.groupDepth=Math.max($('.indentation',this.group[n]).size(),this.groupDepth)}};Drupal.tableDrag.prototype.row.prototype.findChildren=function(addClasses){var parentIndentation=this.indents,currentRow=$(this.element,this.table).next('tr.draggable'),rows=new Array(),child=0;while(currentRow.length){var rowIndentation=$('.indentation',currentRow).length;if(rowIndentation>parentIndentation){child++;rows.push(currentRow[0]);if(addClasses)$('.indentation',currentRow).each(function(indentNum){if(child==1&&(indentNum==parentIndentation))$(this).addClass('tree-child-first');if(indentNum==parentIndentation){$(this).addClass('tree-child')}else if(indentNum>parentIndentation)$(this).addClass('tree-child-horizontal')})}else break;currentRow=currentRow.next('tr.draggable')};if(addClasses&&rows.length)$('.indentation:nth-child('+(parentIndentation+1)+')',rows[rows.length-1]).addClass('tree-child-last');return rows};Drupal.tableDrag.prototype.row.prototype.isValidSwap=function(row){if(this.indentEnabled){var prevRow,nextRow;if(this.direction=='down'){prevRow=row;nextRow=$(row).next('tr').get(0)}else{prevRow=$(row).prev('tr').get(0);nextRow=row};this.interval=this.validIndentInterval(prevRow,nextRow);if(this.interval.min>this.interval.max)return false};if(this.table.tBodies[0].rows[0]==row&&$(row).is(':not(.draggable)'))return false;return true};Drupal.tableDrag.prototype.row.prototype.swap=function(position,row){$(row)[position](this.group);this.changed=true;this.onSwap(row)};Drupal.tableDrag.prototype.row.prototype.validIndentInterval=function(prevRow,nextRow){var minIndent,maxIndent;minIndent=nextRow?$('.indentation',nextRow).size():0;if(!prevRow||$(this.element).is('.tabledrag-root')){maxIndent=0}else{maxIndent=$('.indentation',prevRow).size()+($(prevRow).is('.tabledrag-leaf')?0:1);if(this.maxDepth)maxIndent=Math.min(maxIndent,this.maxDepth-(this.groupDepth-this.indents))};return{min:minIndent,max:maxIndent}};Drupal.tableDrag.prototype.row.prototype.indent=function(indentDiff){if(!this.interval){prevRow=$(this.element).prev('tr').get(0);nextRow=$(this.group).filter(':last').next('tr').get(0);this.interval=this.validIndentInterval(prevRow,nextRow)};var indent=this.indents+indentDiff;indent=Math.max(indent,this.interval.min);indent=Math.min(indent,this.interval.max);indentDiff=indent-this.indents;for(var n=1;n<=Math.abs(indentDiff);n++)if(indentDiff<0){$('.indentation:first',this.group).remove();this.indents--}else{$('td:first',this.group).prepend(Drupal.theme('tableDragIndentation'));this.indents++};if(indentDiff){this.changed=true;this.groupDepth+=indentDiff;this.onIndent()};return indentDiff};Drupal.tableDrag.prototype.row.prototype.findSiblings=function(rowSettings){var siblings=new Array(),directions=new Array('prev','next'),rowIndentation=this.indents;for(var d in directions){var checkRow=$(this.element)[directions[d]]();while(checkRow.length){if($('.'+rowSettings.target,checkRow)){if(this.indentEnabled)var checkRowIndentation=$('.indentation',checkRow).length;if(!(this.indentEnabled)||(checkRowIndentation==rowIndentation)){siblings.push(checkRow[0])}else if(checkRowIndentation<rowIndentation)break}else break;checkRow=$(checkRow)[directions[d]]()};if(directions[d]=='prev'){siblings.reverse();siblings.push(this.element)}};return siblings};Drupal.tableDrag.prototype.row.prototype.removeIndentClasses=function(){for(n in this.children)$('.indentation',this.children[n]).removeClass('tree-child').removeClass('tree-child-first').removeClass('tree-child-last').removeClass('tree-child-horizontal')};Drupal.tableDrag.prototype.row.prototype.markChanged=function(){var marker=Drupal.theme('tableDragChangedMarker'),cell=$('td:first',this.element);if($('span.tabledrag-changed',cell).length==0)cell.append(marker)};Drupal.tableDrag.prototype.row.prototype.onIndent=function(){return null};Drupal.tableDrag.prototype.row.prototype.onSwap=function(swappedRow){return null};Drupal.theme.prototype.tableDragChangedMarker=function(){return'<span class="warning tabledrag-changed">*</span>'};Drupal.theme.prototype.tableDragIndentation=function(){return'<div class="indentation">&nbsp;</div>'};Drupal.theme.prototype.tableDragChangedWarning=function(){return'<div class="warning">'+Drupal.theme('tableDragChangedMarker')+' '+Drupal.t("Changes made in this table will not be saved until the form is submitted.")+'</div>'};
/* Source and licensing information for the above line(s) can be found at http://www.letsdoitworld.org/sites/all/modules/jquery_update/replace/tabledrag.js. */
