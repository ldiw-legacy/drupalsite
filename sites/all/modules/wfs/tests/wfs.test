<?php
// $Id: wfs.test,v 1.1.2.1 2010/05/19 14:29:42 tmcw Exp $

/**
 * @file
 * Main WFS Tests
 * @ingroup wfs 
 */
class WfsGml extends DrupalWebTestCase {
  public static function getInfo() {
    return array(
      'name' => 'WKT to GML test',
      'description' => 'Tests conversion from WKT to GML',
      'group' => 'WFS',
    );
  }

  function setUp() {
    // Install modules
    parent::setUp('wfs');
  }

  /**
   */
  function testWfsGml() {
    module_load_include('inc', 'wfs', 'includes/gml');
    $wkt = 'POLYGON((-7919300.7463663 2443458.2138106,-7920443.8862173 2448109.7613516,-7918774.2051749 2452928.1509857,-7919300.7463663 2443458.2138106),(-8066272.1965175 2467126.2106573,-8065840.7221712 2475510.7473542,-8063274.1399914 2477142.0361748,-8066272.1965175 2467126.2106573),(-7955881.8895139 2470153.8001326,-7963054.9835421 2479671.7677184,-7955200.7255497 2478040.7187921,-7955881.8895139 2470153.8001326),(-7976908.8054908 2490327.0602609,-7977031.1456112 2480303.9290807,-7998368.9769259 2493025.6774966,-7976908.8054908 2490327.0602609),(-8044193.7566305 2481669.1172787,-8051429.8574905 2494224.7995016,-8042586.8597809 2486996.7964384,-8044193.7566305 2481669.1172787),(-8002109.3118166 2493192.1439098,-8018714.7289387 2504656.1951478,-8005232.9367283 2504723.0428373,-8002109.3118166 2493192.1439098))';
    $gml = '<gml:Polygon><gml:exterior><gml:LinearRing><gml:posList decimal=".">-7919300.7463663 2443458.2138106 -7920443.8862173 2448109.7613516 -7918774.2051749 2452928.1509857 -7919300.7463663 2443458.2138106</gml:posList></gml:LinearRing></gml:exterior><gml:interior><gml:LinearRing><gml:posList decimal=".">-8066272.1965175 2467126.2106573 -8065840.7221712 2475510.7473542 -8063274.1399914 2477142.0361748 -8066272.1965175 2467126.2106573</gml:posList></gml:LinearRing></gml:interior><gml:interior><gml:LinearRing><gml:posList decimal=".">-7955881.8895139 2470153.8001326 -7963054.9835421 2479671.7677184 -7955200.7255497 2478040.7187921 -7955881.8895139 2470153.8001326</gml:posList></gml:LinearRing></gml:interior><gml:interior><gml:LinearRing><gml:posList decimal=".">-7976908.8054908 2490327.0602609 -7977031.1456112 2480303.9290807 -7998368.9769259 2493025.6774966 -7976908.8054908 2490327.0602609</gml:posList></gml:LinearRing></gml:interior><gml:interior><gml:LinearRing><gml:posList decimal=".">-8044193.7566305 2481669.1172787 -8051429.8574905 2494224.7995016 -8042586.8597809 2486996.7964384 -8044193.7566305 2481669.1172787</gml:posList></gml:LinearRing></gml:interior><gml:interior><gml:LinearRing><gml:posList decimal=".">-8002109.3118166 2493192.1439098 -8018714.7289387 2504656.1951478 -8005232.9367283 2504723.0428373 -8002109.3118166 2493192.1439098</gml:posList></gml:LinearRing></gml:interior></gml:Polygon>';
    $this->assertEqual($gml, wkt_to_gml($wkt));
  }
}
